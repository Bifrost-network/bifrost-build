--- drivers/net/wireless/ath/ath9k/xmit.c.orig	Wed Jul 16 11:25:04 2014
+++ drivers/net/wireless/ath/ath9k/xmit.c	Wed Jul 16 11:26:18 2014
@@ -1250,13 +1250,15 @@
 	for (tidno = 0, tid = &an->tid[tidno];
 	     tidno < WME_NUM_TID; tidno++, tid++) {
 
-		if (!tid->sched)
-			continue;
-
 		ac = tid->ac;
 		txq = ac->txq;
 
 		ath_txq_lock(sc, txq);
+
+		if (!tid->sched) {
+			ath_txq_unlock(sc, txq);
+			continue;
+		}
 
 		buffered = !skb_queue_empty(&tid->buf_q);
 
